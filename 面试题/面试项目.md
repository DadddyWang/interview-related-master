# 面试项目

## 概念

### Reactor和Proactor模式

reactor模式和proactor模式的区别：对数据处理的方式变了导致监听事件的方式也转变了。

Reactor模式用于同步I/O，而Proactor运用于异步I/O操作。

了解这两个概念首先需要搞清楚几个概念，什么是阻塞和非阻塞，什么是同步和异步；

**同步和异步**是针对应用程序和内核的交互而言的；**同步**指用户进程触发IO操作并等待或者轮询的去查看IO操作是否就绪，**异步**是指用户进程触发IO操作后就开始做自己的事，当IO操作完成时得到IO操作完成的通知。

**阻塞与非阻塞**是针对于进程在访问数据的时候，根据IO操作





### EPOLLONESHOT事件

即使我们使用ET模式，一个socket上的某个事件还是可能被触发多次。这在并发程序中就会引起一个问题。比如一个线程（或进程，下同）在读取完某个socket上的数据后开始处理这些数据，而在数据的处理过程中该socket上该数据又有新数据可读（EPOLLIN再次被触发），此时我们另外一个线程被唤醒来读取这些新的数据。于是就出现了两个线程同时操作一个socket的局面。

对于注册了EPOLLONESHOT事件的文件描述符，操作系统最多触发其上注册的一个可读、可写或者异常事件，且只触发一次，除非我们使用epoll_ctl函数重置该文件描述符上注册的EPOLLONESHOT事件。这样，当一个线程在处理某个socket时，其他线程是不可能有机会操作该socket的。但反过来思考，注册了EPOLLONESHOT事件的socket一旦被某个线程处理完毕，该线程就应该立即重置这个socket上的EPOLLONESHOT事件，以确保这个socket下一次可读时，其EPOLLIN事件能被触发，进而让其他工作线程有机会继续处理这个socket。

